{"version":3,"sources":["uni-app:///main.js","webpack:///D:/HBuilderwWorkspace/idPhoto/pages/edit/index.vue?7d64","webpack:///D:/HBuilderwWorkspace/idPhoto/pages/edit/index.vue?546a","webpack:///D:/HBuilderwWorkspace/idPhoto/pages/edit/index.vue?e11c","webpack:///D:/HBuilderwWorkspace/idPhoto/pages/edit/index.vue?c046","uni-app:///pages/edit/index.vue","webpack:///D:/HBuilderwWorkspace/idPhoto/pages/edit/index.vue?050b","webpack:///D:/HBuilderwWorkspace/idPhoto/pages/edit/index.vue?e177"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","x","y","x1","y1","x2","y2","components","colorPicker","data","items","imageData","cimg","showScale","rpxRatio","width","height","left","top","scale","rotate","bgc","maskLeft","maskTop","maskScale","maskRotate","pick","color","picUrl","picId","downloadOne","downloadTwo","current","onLoad","methods","getImageData","eventChannel","console","uni","title","setRpxRatio","success","getWeb","url","header","token","method","toggleBg","toPick","pickColor","updateColor","image","colors","icon","saveNormalPhoto","photoId","saveHDPhoto","savePicAndImg","savePicUrlAndImg","filePath","duration","fail","that","savePicIdAndImg","checkq","content","composeImage","rgbStringToHex","bindload","widthPx","heightPx","touchstart","canOnePointMove","onePoint","twoPoint","touchmove","newScale","touchend","clickTab"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,2WAEN;AACP,KAAK;AACL;AACA,aAAa,gNAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAAkmB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;AC0EtnB;AACA;AACA;EACAC;EACAC;AACA;AACA;EACAC;EACAC;EACAC;EACAC;AACA;AAAA,eACA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;QACAC;MACA;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEA;MACA;MACAC;MAEAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;EACA;;EACAC;IACAC;MAAA;MACA;MACA;QACAC;UACA;UACAC;UACAC;YACAC;UACA;QACA;MACA;IACA;IAEAC;MAAA;MACAF;QACAG;UACA;QACA;MACA;IACA;IAEAC;MAAA;MACAJ;QACAK;QACAC;UACAC;QACA;QACAC;QACAL;UACA;UACA;QACA;MACA;IACA;IAEA;IACAM;MACAT;QACAC;MACA;MACA;MACAF;MACA;IACA;IAEAW;MACA;IACA;IAEA;IACAC;MACAX;QACAC;MACA;MACA;MACA;MACA;IACA;IAEA;IACAW;MAAA;MACAZ;QACAK;QACAlC;UACA0C;UACAC;QACA;QACAR;UACAC;QACA;QACAC;QACAL;UACA;YACA;YACAH;UACA;YACAA;YACAA;cACAC;cACAc;YACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACAhB;QACAC;MACA;MACAD;QACAK;QACAlC;UACA0C;UACAI;QACA;QACAX;UACAC;QACA;QACAC;QACAL;UACA;YACA;YACA;YACA;UACA;YACAH;cACAC;cACAc;YACA;UACA;QACA;MACA;IACA;IAEA;IACAG;MAAA;MACA;MACA;MACA;QACA;MACA;IACA;IAEAC;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACApB;QACAK;QACAF;UACAH;UACA;UACAA;YACAqB;YACAlB;cACAH;gBACAC;gBACAc;gBACAO;cACA;YACA;YACAC;cACAC;YACA;UACA;QACA;;QAEAD;UACAxB;UACAC;YACAC;YACAc;YACAO;UACA;QACA;MACA;IACA;IAEA;IACAG;MACA;MACAzB;QACAK;QACAF;UACAH;UACA;UACAA;YACAqB;YACAlB;cACAH;gBACAC;gBACAc;gBACAO;cACA;YACA;YACAC;cACAC;YACA;UACA;QACA;;QAEAD;UACAxB;UACAC;YACAC;YACAc;YACAO;UACA;QACA;MACA;IACA;IAEA;IACAI;MAAA;MACA1B;QACAG;UACA;YACAH;cACAC;cACA0B;cACAxB;gBACA;kBACAH;oBACAG;sBACA;oBACA;oBACAoB;sBACAxB;oBACA;kBACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IAEA;IACA6B;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA5B;kBACAC;gBACA;gBACAD;kBACAK;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEAwB;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA9B;MACA;QAAAvB;QAAAC;MACA;QAAAqD;QAAAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;QACAC;QACAC;QACAA;MACA;QACAC;QACAA;QACAA;QACAA;MACA;IACA;IAEAC;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAF;QACAA;MACA;QACA;QACA;QACAC;QACAA;QACAA;QACAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;UACA;UACA;UACA;YACAE;UACA;UACA;UACA;UACA;UACA;QACA;MACA;IACA;IAEAC;MACAL;IACA;IAEAM;MACAzC;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC1cA;AAAA;AAAA;AAAA;AAAq3B,CAAgB,o2BAAG,EAAC,C;;;;;;;;;;;ACAz4B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/edit/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/edit/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=27475746&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/edit/index.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=27475746&\"","var components\ntry {\n  components = {\n    uniSegmentedControl: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control\" */ \"@/uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control.vue\"\n      )\n    },\n    colorPicker: function () {\n      return import(\n        /* webpackChunkName: \"components/color-picker/color-picker\" */ \"@/components/color-picker/color-picker.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"container\">\n        <view class=\"photo-edit-content\">\n            <view class=\"canvas-view\" style=\"background-color: #fff; width: 240px; height: 336px\">\n                <image\n                    class=\"nowx_mask\"\n                    style=\"width: 292px; left: 120px; top: 164px; transform: translate(-50%, -50%) scale(1) rotate(0deg); z-index: 99; height: 163.52px\"\n                    src=\"/static/images/wmark.png\"\n                    mode=\"widthFix\"\n                ></image>\n                <image\n                    style=\"width: 240px; height: 336px; left: 120px; top: 164px; transform: translate(-50%, -50%) scale(1) rotate(0deg)\"\n                    class=\"people-photo\"\n                    :src=\"imageData.cimg\"\n                    @load=\"bindload\"\n                    @touchstart.stop.prevent=\"touchstart\"\n                    @touchmove.stop.prevent=\"touchmove\"\n                    @touchend.stop.prevent=\"touchend\"\n                ></image>\n            </view>\n        </view>\n        <view class=\"imgOpt\">\r\n\t\t\t<uni-segmented-control :current=\"current\" :values=\"items\" style-type=\"text\"\r\n\t\t\t\tactive-color=\"#2c2c2c\" @clickItem=\"clickTab\" />\r\n\t\t\t<view>\r\n\t\t\t\t<view class=\"colors\">\r\n\t\t\t\t\t<!-- 蓝色背景 -->\r\n\t\t\t\t\t<view @tap=\"toggleBg\" data-color=\"#438edb\" class=\"color\" style=\"background-color: #438edb\">\r\n\t\t\t\t\t\t<view class=\"icon_select\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 白色背景 -->\r\n\t\t\t\t\t<view @tap=\"toggleBg\" data-color=\"#fff\" class=\"color\" style=\"background-color: #fff\">\r\n\t\t\t\t\t\t<view class=\"icon_select\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 红色背景 -->\r\n\t\t\t\t\t<view @tap=\"toggleBg\" data-color=\"#ff0000\" class=\"color\" style=\"background-color: #ff0000\">\r\n\t\t\t\t\t\t<view class=\"icon_select\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 浅蓝色背景 -->\r\n\t\t\t\t\t<view @tap=\"toggleBg\" data-color=\"#66b5f2\" class=\"color\" style=\"background-color: #66b5f2\">\r\n\t\t\t\t\t\t<view class=\"icon_select\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 绿色背景 -->\r\n\t\t\t\t\t<view @tap=\"toggleBg\" data-color=\"#07c160\" class=\"color\" style=\"background-color: #07c160\">\r\n\t\t\t\t\t\t<view class=\"icon_select\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 黄色背景 -->\r\n\t\t\t\t\t<view @tap=\"toggleBg\" data-color=\"#ffc300\" class=\"color\" style=\"background-color: #ffc300\">\r\n\t\t\t\t\t\t<view class=\"icon_select\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 自定义颜色选项 -->\r\n\t\t\t\t\t<view @tap=\"toPick\" data-color=\"custom\" class=\"color custom\" style=\"display: flex; align-items: center; justify-content: center\">\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\tclass=\"custom-bg\"\r\n\t\t\t\t\t\t\tstyle=\"background-color: #2c2c2c; width: 100%; height: 100%; font-size: 12px; color: #fff; margin: 0 auto; line-height: 12vw; text-align: center\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t自定义\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n            <view class=\"download-view\">\n                <button @tap=\"saveNormalPhoto\" type=\"default\" class=\"save-btn\">保存预览照</button>\n                <button @tap=\"saveHDPhoto\" type=\"default\" class=\"save-btn\">保存AI高清照</button>\n            </view>\n\n            <color-picker @changeColor=\"pickColor\" initColor=\"rgb(7,193,96)\" :show=\"pick\" />\n        </view>\n    </view>\n</template>\n\n<script>\r\n\t\nimport colorPicker from '../../components/color-picker/color-picker';\nconst app = getApp();\nlet canOnePointMove = false;\nlet onePoint = {\n    x: 0,\n    y: 0\n};\nlet twoPoint = {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0\n};\nexport default {\n    components: {\n        colorPicker\n    },\n    data() {\n        return {\r\n\t\t\titems: ['背景'],\n            imageData: {\n                cimg: ''\n            },\n\n            showScale: 1.6271186440677967,\n            rpxRatio: 1,\n            width: 0,\n            height: 0,\n            left: 0,\n            top: 0,\n            scale: 1,\n            rotate: 0,\n            bgc: '#ffffff',\n            maskLeft: 0,\n            maskTop: 0,\n            maskScale: 1,\n            maskRotate: 0,\n            pick: false,\n            color: '438edb',\n            picUrl: '',\n\n            // downloadOne:1,\n            // downloadTwo:2\n            picId: '',\n\n            downloadOne: '',\n            downloadTwo: '',\n            current: ''\n        };\n    },\n    onLoad: function (options) {\n        this.getImageData();\n        this.setRpxRatio();\n        // this.getWeb();\n    },\n    methods: {\n        getImageData() {\n            const eventChannel = this.getOpenerEventChannel && this.getOpenerEventChannel();\n            if (eventChannel) {\n                eventChannel.on('sendImageData', (data) => {\n                    this.imageData = data\n                    console.log(this);\n                    uni.setNavigationBarTitle({\n                        title: this.imageData.name + '（预览）'\n                    });\n                });\n            }\n        },\n\n        setRpxRatio() {\n            uni.getWindowInfo({\n                success: (res) => {\n                    this.rpxRatio = res.screenWidth / 750\n                }\n            });\n        },\n\n        getWeb() {\n            uni.request({\n                url: app.globalData.url + 'api/getWeb',\n                header: {\n                    token: app.globalData.token\n                },\n                method: 'POST',\n                success: (res) => {\n                    this.downloadOne = res.data.downloadOne\n                    this.downloadTwo = res.data.downloadTwo\n                }\n            });\n        },\n\n        // 点击换背景\n        toggleBg(e) {\n            uni.showLoading({\n                title: '制作中...'\n            });\n            this.color = e.currentTarget.dataset.color\n            console.log(e.currentTarget.dataset.color);\n            this.updateColor(this.color, this.imageData.kimg);\n        },\n\n        toPick: function () {\n            this.pick = true\n        },\n\n        //自定义换背景\n        pickColor(e) {\n            uni.showLoading({\n                title: '制作中...'\n            });\n            let color = this.rgbStringToHex(e.detail.color);\n            this.color = color\n            this.updateColor(color, this.imageData.kimg);\n        },\n\n        //调用换背景\n        updateColor(color, tu) {\n            uni.request({\n                url: app.globalData.url + 'api/updateIdPhoto',\n                data: {\n                    image: tu,\n                    colors: color\n                },\n                header: {\n                    token: app.globalData.token\n                },\n                method: 'POST',\n                success: (res) => {\n                    if (res.data.code == 200) {\n                        this.imageData.cimg = res.data.data.cimg\n                        uni.hideLoading();\n                    } else if (res.data.code == 404) {\n                        uni.hideLoading();\n                        uni.showToast({\n                            title: res.data.data,\n                            icon: 'error'\n                        });\n                    }\n                }\n            });\n        },\n\n        //保存证件照\n        saveNormalPhoto() {\n            uni.showLoading({\n                title: '下载中...'\n            });\n            uni.request({\n                url: app.globalData.url + 'api/updateUserPhonto',\n                data: {\n                    image: this.imageData.cimg,\n                    photoId: this.imageData.id2\n                },\n                header: {\n                    token: app.globalData.token\n                },\n                method: 'POST',\n                success: (res) => {\n                    if (res.data.code == 200) {\n                        this.picUrl = res.data.data.picUrl\n                        this.picId = res.data.data.picId\n                        this.savePicAndImg();\n                    } else if (res.data.code == 404) {\n                        uni.showToast({\n                            title: res.data.data,\n                            icon: 'none'\n                        });\n                    }\n                }\n            });\n        },\n\n        //保存高清照\n        saveHDPhoto() {\n            this.picUrl = ''\n            this.updateColor(this.color, this.imageData.oimg);\n            this.$nextTick(() => {\n                this.saveNormalPhoto();\n            });\n        },\n\n        savePicAndImg() {\n            //调用保存\n            if (this.picId) {\n                this.savePicIdAndImg();\n            } else {\n                this.savePicUrlAndImg();\n            }\n        },\n\n        // 根据图片url下载保存\n        savePicUrlAndImg() {\n            const that = this;\n            uni.downloadFile({\n                url: this.picUrl,\n                success: function (res) {\n                    uni.hideLoading();\n                    // 下载成功后将图片保存到本地\n                    uni.saveImageToPhotosAlbum({\n                        filePath: res.tempFilePath,\n                        success: function () {\n                            uni.showToast({\n                                title: '保存成功',\n                                icon: 'success',\n                                duration: 2000\n                            });\n                        },\n                        fail: function () {\n                            that.checkq(); //解决用户拒绝相册\n                        }\n                    });\n                },\n\n                fail: function (res) {\n                    console.log(res);\n                    uni.showToast({\n                        title: '下载图片失败，请重试',\n                        icon: 'none',\n                        duration: 2000\n                    });\n                }\n            });\n        },\n\n        // 根据图片id下载保存\n        savePicIdAndImg() {\n            const that = this;\n            uni.downloadFile({\n                url: app.globalData.url + 'file/download?id=' + this.picId,\n                success: function (res) {\n                    uni.hideLoading();\n                    // 下载成功后将图片保存到本地\n                    uni.saveImageToPhotosAlbum({\n                        filePath: res.tempFilePath,\n                        success: function () {\n                            uni.showToast({\n                                title: '保存成功',\n                                icon: 'success',\n                                duration: 2000\n                            });\n                        },\n                        fail: function () {\n                            that.checkq(); //解决用户拒绝相册\n                        }\n                    });\n                },\n\n                fail: function (res) {\n                    console.log(res);\n                    uni.showToast({\n                        title: '下载图片失败，请重试',\n                        icon: 'none',\n                        duration: 2000\n                    });\n                }\n            });\n        },\n\n        // 解决用户拒绝相册问题\n        checkq() {\n            uni.getSetting({\n                success: (res) => {\n                    if (!res.authSetting['scope.writePhotosAlbum']) {\n                        uni.showModal({\n                            title: '提示',\n                            content: '保存图片需要授权哦',\n                            success: (res) => {\n                                if (res.confirm) {\n                                    uni.openSetting({\n                                        success: (res) => {\n                                            this.savePicAndImg();\n                                        },\n                                        fail: (res) => {\n                                            console.log(res);\n                                        }\n                                    });\n                                }\n                            }\n                        });\n                    }\n                }\n            });\n        },\n\n        //去分享页面(待开发分享下载)\n        async composeImage() {\n            uni.showLoading({\n                title: '制作中...'\n            });\n            uni.redirectTo({\n                url: './complete/index?msg=111&tempFilePath=pa&url=https://www.haimati.cn/img/1_7_1.98819809.jpg'\n            });\n        },\n\n        rgbStringToHex(rgbString) {\n            // 提取 rgb 值\n            const rgbValues = rgbString.match(/\\d+/g);\n\n            // 将 rgb 值转换为十六进制\n            const r = parseInt(rgbValues[0], 10);\n            const g = parseInt(rgbValues[1], 10);\n            const b = parseInt(rgbValues[2], 10);\n            return '#' + (16777216 + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();\n        },\n\n        bindload: function (e) {\n            uni.hideLoading({});\n            const { width, height } = e.detail;\n            const { widthPx, heightPx } = this.imageData;\n            const _width = widthPx;\n            const _height = (_width * height) / width;\n            const topOffset = uni.getWindowInfo().screenHeight * 0.1;\n            this.originImgWidth = width\n            this.originImgHeight = height\n            this.initImgWidth = _width\n\t\t\tthis.initImgHeight = _height\n\t\t\tthis.width = _width\n\t\t\tthis.height = _height\n\t\t\tthis.left = _width / 2\n\t\t\tthis.top = _height / 2 + heightPx - _height + topOffset - 86\n\t\t\tthis.maskLeft = _width / 2\n\t\t\tthis.maskTop = _height / 2 + heightPx - _height + topOffset - 86\n        },\n\n        touchstart: function (e) {\n            if (e.touches.length < 2) {\n                canOnePointMove = true;\n                onePoint.x = e.touches[0].pageX * 2;\n                onePoint.y = e.touches[0].pageY * 2;\n            } else {\n                twoPoint.x1 = e.touches[0].pageX * 2;\n                twoPoint.y1 = e.touches[0].pageY * 2;\n                twoPoint.x2 = e.touches[1].pageX * 2;\n                twoPoint.y2 = e.touches[1].pageY * 2;\n            }\n        },\n\n        touchmove: function (e) {\n            const { data } = this;\n            const thatData = data;\n            if (e.touches.length < 2 && canOnePointMove) {\n                // 单指移动\n                const onePointDiffX = e.touches[0].pageX * 2 - onePoint.x;\n                const onePointDiffY = e.touches[0].pageY * 2 - onePoint.y;\n                this.left = thatData.left + onePointDiffX\n                this.top = thatData.top + onePointDiffY\n                this.maskLeft = thatData.maskLeft + onePointDiffX\n                this.maskTop = thatData.maskTop + onePointDiffY\n                onePoint.x = e.touches[0].pageX * 2;\n                onePoint.y = e.touches[0].pageY * 2;\n            } else if (e.touches.length > 1) {\n                // 双指缩放/旋转\n                const preTwoPoint = JSON.parse(JSON.stringify(twoPoint));\n                twoPoint.x1 = e.touches[0].pageX * 2;\n                twoPoint.y1 = e.touches[0].pageY * 2;\n                twoPoint.x2 = e.touches[1].pageX * 2;\n                twoPoint.y2 = e.touches[1].pageY * 2;\n                const preAngle = (Math.atan((preTwoPoint.y1 - preTwoPoint.y2) / (preTwoPoint.x1 - preTwoPoint.x2)) * 180) / Math.PI;\n                const curAngle = (Math.atan((twoPoint.y1 - twoPoint.y2) / (twoPoint.x1 - twoPoint.x2)) * 180) / Math.PI;\n                const preDistance = Math.sqrt(Math.pow(preTwoPoint.x1 - preTwoPoint.x2, 2) + Math.pow(preTwoPoint.y1 - preTwoPoint.y2, 2));\n                const curDistance = Math.sqrt(Math.pow(twoPoint.x1 - twoPoint.x2, 2) + Math.pow(twoPoint.y1 - twoPoint.y2, 2));\n                const angleThreshold = 0.5;\n                const distanceThreshold = 2;\n                if (Math.abs(curAngle - preAngle) > angleThreshold || Math.abs(curDistance - preDistance) > distanceThreshold) {\n                    const smoothFactor = 0.2;\n                    let newScale = thatData.scale + (curDistance - preDistance) * 0.005 * smoothFactor;\n                    if (newScale < 0.5) {\n                        newScale = 0.5;\n                    }\n                    this.scale = newScale\n                    this.rotate = thatData.rotate + (curAngle - preAngle) * smoothFactor\n                    this.maskScale = newScale\n                    this.maskRotate = thatData.rotate + (curAngle - preAngle) * smoothFactor\n                }\n            }\n        },\n\n        touchend: function () {\n            canOnePointMove = false;\n        },\n\n        clickTab() {\n            console.log('占位：函数 clickTab 未声明');\n        }\n    }\n};\n</script>\n<style>\n.container {\n    width: 100vw;\n    height: 90vh;\n    overflow: hidden;\n    position: relative;\n}\n\n.imgOpt {\n    width: 100%;\n    height: 100%;\n    background: #fff;\n}\n\n.imgOpt .colors {\n    z-index: 20;\n    position: relative;\n    width: 100%; /* 确保容器宽度为100% */\n    display: flex;\n    flex-wrap: wrap; /* 确保子元素自动换行 */\n    justify-content: flex-start;\n    margin-top: 10px;\n    margin-left: 10px;\n    overflow-x: hidden; /* 禁止横向滚动条 */\n    touch-action: pan-y; /* 禁止左右滑动 */\n}\n\n.imgOpt .colors .color {\n    width: 22%;\n    height: 12vw;\n    margin: 1%;\n    border: 1px solid #ddd;\n    border-radius: 10px;\n    overflow: hidden;\n    box-sizing: border-box;\n}\n\n.imgOpt .colors .color.transparent {\n    background-color: transparent;\n    position: relative;\n}\n\n.imgOpt .colors .color.transparent::before {\n    content: '透明';\n    position: absolute;\n    left: 0;\n    top: 50%;\n    width: 100%;\n    text-align: center;\n    color: #333;\n    line-height: 1;\n    height: 1em;\n    margin-top: -0.5em;\n    font-size: 14px;\n}\n\n/* canvas */\n.container .photo-edit-content {\n    padding: 5px;\n    padding-bottom: 15px;\n    width: 100%;\n    background: '#e6e2e';\n    box-sizing: border-box;\n}\n\n.container .photo-edit-content .canvas-view {\n    position: relative;\n    width: 100%;\n    height: 300px;\n    margin: 0 auto;\n    box-sizing: content-box;\n    overflow: hidden;\n}\n\n.container .photo-edit-content .canvas-view .people-photo {\n    position: absolute;\n    width: 100%;\n    transform-origin: center center;\n}\n\n.download-view {\n    z-index: 10; /* 确保按钮在前 */\n    margin: 0 auto;\n    width: 90%;\n    position: fixed;\n    bottom: 10px; /* 调整bottom，避免覆盖颜色选择区域 */\n    display: flex;\n    justify-content: space-between;\n    left: 20px;\n    height: 59px;\n}\n\n.download-view button {\n    background-color: #2c2c2c !important;\n    color: #fff !important;\n    font-weight: normal;\n    height: 50px;\n    line-height: 50px;\n    width: 48% !important;\n    border-radius: 10px;\n    margin: 0;\n}\n\n/* color picker */\n.color-picker-view {\n    position: absolute;\n    width: 100%;\n    overflow: visible;\n    z-index: 99;\n}\n\n.color-picker-view .color-picker-content {\n    height: 55vh;\n    width: 100%;\n    background-color: #fff;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n}\n\n.color-picker-view .color-picker-content .current-color {\n    width: 100%;\n}\n\n.color-picker {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n}\n\n.color-picker-view .color-picker-content button {\n    margin: 0 auto;\n    background-color: #2c2c2c;\n    color: #fff;\n    margin-top: 10px;\n}\n\n.clothes {\n    height: 210px;\n    width: 100%;\n    padding: 15px 20px;\n    display: flex;\n    flex-wrap: wrap;\n}\n\n.clothes .block:nth-child(2n + 1) {\n    width: 27.5%;\n    height: 70px;\n    margin: 0 15px 15px 0;\n}\n\n.clothes .block:nth-child(2n) {\n    width: 27.5%;\n    height: 70px;\n    margin: 0 15px 15px 0;\n}\n\n.hair {\n    height: 210px;\n    width: 100%;\n    padding: 15px 20px;\n    display: flex;\n    flex-wrap: wrap;\n}\n\n.hair .block:nth-child(2n + 1) {\n    width: 19.3%;\n    height: 70px;\n    margin: 0 15px 15px 0;\n}\n\n.hair .block:nth-child(2n) {\n    width: 19.3%;\n    height: 70px;\n    margin: 0 15px 15px 0;\n}\n\n.nowx_mask {\n    margin: auto;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n}\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1726766876638\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}